<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>Simple Tag Creation</title>
  </head>

  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"
  ></script>


  <table class="table table-striped">
    <tr>
      <th class="">Tag</th>
      <th>Action</th>
    </tr>
    
    <tr>
    <td>
      Smart-MF (Training) Tag
      <br><small>(Ex- smartmf-training-2023-06-04-18-53)</small>
    </td>
    <!-- <td><strong id="uatTagName"> </strong></td> -->
    <td>
      <button onclick="copyToClipBoard('smartmf-training', true)" class="btn btn-sm btn-outline-primary">
        Copy
      </button>
      
      <button onclick="openGitlabSmartMF('smartmf-training')" class="btn btn-sm btn-link">
        Smart-MF Tag <img src="https://cdn-icons-png.flaticon.com/512/4949/4949024.png" width="20" />
      </button>
    </td>
  </tr>
    
    <tr>
      <td>
        UAT Tag
        <br><small>(Ex- uat-2023-3-20-1444)</small>
      </td>
      <!-- <td><strong id="uatTagName"> </strong></td> -->
      <td>
        <button onclick="copyToClipBoard('uat')" class="btn btn-sm btn-outline-primary">
          Copy
        </button>
        
        <button onclick="openGitlab('uat')" class="btn btn-sm btn-link">
          HR Payroll Tag <img src="https://cdn-icons-png.flaticon.com/512/4949/4949024.png" width="20" />
        </button>
      </td>
    </tr>

    <tr>
      <td>
        Testing Tag
        <br><small>(Ex- testing-2023-3-20-1444)</small>
      </td>
      <!-- <td><strong id="testTagName"> </strong></td> -->
      <td>
        <button onclick="copyToClipBoard('testing')" class="btn btn-sm btn-outline-primary">
          Copy
        </button>

        <button onclick="openGitlab('testing')" class="btn btn-sm btn-link">
          HR Payroll Tag <img src="https://cdn-icons-png.flaticon.com/512/4949/4949024.png" width="20" />
        </button>
      </td>
    </tr>


    <tr>
      <td>Demo Tag
        <br><small>(Ex- demo-2023-3-20-1444)</small>
      </td>
      <!-- <td><strong id="testTagName"> </strong></td> -->
      <td>
        <button onclick="copyToClipBoard('demo')" class="btn btn-sm btn-outline-primary">
          Copy
        </button>

        <button onclick="openGitlab('demo')" class="btn btn-sm btn-link">
          HR Payroll Tag <img src="https://cdn-icons-png.flaticon.com/512/4949/4949024.png" width="20" />
        </button>
      </td>
    </tr>


    <tr>
      <td>Production Tag
        <br><small>(Ex- production-2023-3-20-1444)</small>
      </td>
      <!-- <td><strong id="testTagName"> </strong></td> -->
      <td>
        <button onclick="copyToClipBoard('production')" class="btn btn-sm btn-outline-primary">
          Copy
        </button>

        <button onclick="openGitlab('production')" class="btn btn-sm btn-link">
          HR Payroll Tag <img src="https://cdn-icons-png.flaticon.com/512/4949/4949024.png" width="20" />
        </button>
      </td>
    </tr>

  </table>

  <div class="text-success" id="success-msg"></div>

  <script>
    //setInterval(generateUATTagName, 1000 * 60);

    var uatTagName = '';

    function generateUATTagName(tagPre, isTwentyFourClock) {
      console.log('generateUATTagName method called');
      

      if(isTwentyFourClock){
        uatTagName =
        tagPre + '-' +
        new Date().getFullYear() +
        '-' +
        (new Date().getMonth() + 1 < 10 ? '0' + new Date().getMonth() : new Date().getMonth()) +
        '-' +
        (new Date().getUTCDate() < 10 ? '0' + new Date().getUTCDate() : new Date().getUTCDate()) +
        '-' +
        (new Date().getHours() > 12 ? new Date().getHours() - 12 : new Date().getHours()) +
        (new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes()) + 
        (new Date().getHours() > 12 ? "PM" : "AM");
      }else{
        uatTagName =
        tagPre + '-' +
        new Date().getFullYear() +
        '-' +
        (new Date().getMonth() + 1) +
        '-' +
        new Date().getUTCDate() +
        '-' +
        new Date().getHours() +
        (new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes());
      }   

      //document.getElementById('uatTagName').innerText = uatTagName;
      //copyToClipBoard();
    }

    function copyToClipBoard(tagPre, isTwentyFourClock) {
      generateUATTagName(tagPre, isTwentyFourClock);
      /* Copy the text inside the text field */
      navigator.clipboard.writeText(uatTagName);

      /* Alert the copied text */
      //alert('Copied the text: ' + uatTagName);
      document.getElementById('success-msg').innerHTML = 'Copy Success!  : <strong>' + uatTagName +'</strong>'
    }

    function openGitlab(tagPre){
      generateUATTagName(tagPre, false);
      
      branch = 'qa_release_sept_2022'
      if(tagPre == 'testing'){
        branch = 'qa_release_sept_2022'
      }
      else if(tagPre == 'demo'){
        branch = 'demo-instance'
      }
      else if(tagPre == 'uat'){
        branch = 'feature/bypass-ldap'
      }
      else if(tagPre == 'production'){
        branch = 'develop'
      }
      window.open('https://gitlab.bracits.com/bits-internal/bits-hr-payroll/-/tags/new?tag_name=' + uatTagName + '&ref=' + branch)
    }

    function openGitlabSmartMF(tagPre){
      generateUATTagName(tagPre, true);
      
      branch = 'feature/refactore-lib-validate'
      if(tagPre == 'training'){
        branch = 'feature/refactore-lib-validate'
      }
      // else if(tagPre == 'demo'){
      //   branch = 'demo-instance'
      // }
      // else if(tagPre == 'uat'){
      //   branch = 'feature/bypass-ldap'
      // }
      // else if(tagPre == 'production'){
      //   branch = 'develop'
      // }
      window.open('https://gitlab.bracits.com/brac/sbicloud-bd-v3/member-onboarding-backend-java/-/tags/new?tag_name=' + uatTagName + '&ref=' + branch)
    }

  </script>
</html>
